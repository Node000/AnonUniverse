# 中文互联网的千早爱音 Web ver.

## 开发目的
用于动态记录当前中文互联网上的各种有关千早爱音的形象（官方与二创），方便大众进行查找。

## 功能需求
### 展示功能
以类似“知识图谱”的形式，将每个千早爱音形象当做一个节点，使用线进行连接。每个节点下方都应该显示其形象名字。

图谱应该可以随意拖动缩放，从而查看任意位置，并且在UI左上角提供一个回到第一个形象节点的按钮。

点击节点会使节点微微放大，图谱整体左移，并从右侧弹出一个半透明的详细信息显示面板，从上往下依次是：形象图片、名字、出处、标签、相关作品，这应该是一个可上下滑动的栏目。

#### 节点信息
一个节点应该包含以下内容：
- id
- 形象图片（暂无，若没有上传则使用文字代替）
- 形象名字
- 出处
- 标签
- 相关作品
- 连线情况

### 数据读取
应该使用文件保存所有千早爱音的形象，从而可进行增删改。

打开网页时加载文件数据，并生成知识图谱。

### 动态增删改
当点击节点并弹出详细信息后，详细信息面板上方会浮现3个按钮：修改（左）、新增（左）、删除（右）。

点击“修改”后将使详细信息面板变为可修改状态，同时面板最末尾会显示“确认”和“取消”按钮，点击“确认”后完成修改并更新文件和用户增删改次数，点击“取消”后将面板重置并变为不可修改状态。

点击“新增”后，详细信息面板变为一个空白且可修改的面板，同时面板最末尾会显示“确认”和“取消”按钮，点击“确认”后完成新增并更新文件和用户增删改次数，点击“取消”后收回面板。

（注：新增和修改状态下，点击形象图片可以上传图片，最大不超过1M，支持JPG和PNG，在点击确认后再上传到后台。）

点击“删除”后，弹出一个确认框：“你确定要删除这个千早爱音形象吗？（请输入该形象的名字确认删除）”，下面是一个输入框，使用回车键确认输入，使用esc或者点击屏幕的其他地方取消确认框。若名字一致则删除并收回详细信息面板，若不一致则将括号内字修改为“（名字不一致，请重新输入）”并清空输入框

进行增删改后，更新后台的数据文件，并更新渲染。

（注：我希望每次打开后的图谱应该是相近的，即每次新增都应该是在原有图谱上扩展，而不会对原图谱的显示造成较大影响，可以小范围移动节点，但是不应该产生左右上下位置翻转的情况）

### 形象查找过滤
网页UI左下角应该有一个搜索栏，向内输入可以自动查找相关形象/标签（搜索结果左侧显示类型）（搜索栏上面会浮现自动匹配的搜索结果，需要点击搜索结果才会有搜索反应）。若点击的搜索结果属于形象，则搜索栏情况并填入该形象，网页中心移动到目标形象位置，并将所有其他节点变为半透明；若点击的搜索结果属于表情，则在搜索栏追加该标签（搜索栏的每个搜索项后方应该增加一个可删除的按钮，点击后可以删除该搜索项），并且根据搜索栏内容，将所有不符合全部搜索要求的节点变为半透明。

### 账户与用户鉴权
所有访问网站的用户将分为三个权限等级：游客、普通用户、管理员。这几个权限仅在增删改方面有存在差异：游客无法进行增删改，普通用户可以每日进行增删改各一次，管理员没有增删改次数限制。

管理员账户应该通过后台手动设置（也许用一个文件保存？）

网页UI右上角应该会显示用户的登陆状态，有两种状态：“已登录：【bangumi用户名】”、“未登录”。前者绿色，后者灰色。点击后会弹出一项下拉栏，已登录时弹出“退出登录”，未登录时弹出“使用bangumi账号登陆”

所有登陆的账户应该在后台记录其当前的增删改次数。并在用户登陆时检查时间戳，从而重置其增删改次数（cookie自动登陆也应该触发这个功能）（也许用文件保存？）

### 动效相关
整个图谱应该处于微微浮动的状态，鼠标可以微微拨动图片节点

打开网站应该先有一个加载动画，目前可以做成一个粉色的加载进度圈

## 预想开发流程
1. 完成基础知识图谱展示功能
2. 完成数据读取功能
3. 完成动态增删改功能
4. 完成图片上传功能
5. 完成查找过滤功能
6. 完成bangumi鉴权与权限功能
7. 完成浮动效果与简单物理效果